function drawCharts(){let requestAjaxCombo;$.ajax({url:"./modules/statistiques/json/datasForCharts.php",type:"POST",dataType:"json",cache:!1,async:!0}).done((function(data){var dateDebut=new Date(1642929562e3),dateFin=new Date(1643361562e3);let arrayDatas=[];for(;dateDebut<=dateFin;)if(0!=dateDebut.getDay()&&6!=dateDebut.getDay()){var day=dateDebut.getDate(),month=dateDebut.getMonth()+1,year=dateDebut.getFullYear();day<10&&(day="0"+day),month<10&&(month="0"+month),arrayDatas[day+"/"+month+"/"+year]=[],arrayDatas[day+"/"+month+"/"+year].depenses=[],arrayDatas[day+"/"+month+"/"+year].revenus=[],data[day+"/"+month+"/"+year]&&(arrayDatas[day+"/"+month+"/"+year]=data[day+"/"+month+"/"+year]),dateDebut.setDate(dateDebut.getDate()+1)}else dateDebut.setDate(dateDebut.getDate()+1);chartDepensesRevenus(arrayDatas),chartUniqueDepenseOrRevenus(arrayDatas,"revenus","chart_revenus"),chartUniqueDepenseOrRevenus(arrayDatas,"depenses","chart_depenses")}))}function chartDepensesRevenus(arrayDatas){if(!arrayDatas)return!1;let arrayForChart=[];arrayForChart.push(["day","dÃ©penses","revenus"]);for(let day in arrayDatas){let totalDepensesDay=0,totalRevenusDay=0;for(let revenus in arrayDatas[day].revenus)totalRevenusDay+=parseInt(arrayDatas[day].revenus[revenus].prix,10);for(let depenses in arrayDatas[day].depenses)totalDepensesDay+=parseInt(arrayDatas[day].depenses[depenses].prix,10);arrayForChart.push([day,totalDepensesDay,totalRevenusDay])}var dataChart=google.visualization.arrayToDataTable(arrayForChart),options={title:"Stats global",hAxis:{title:"Year",titleTextStyle:{color:"#333"}},vAxis:{minValue:0}},chart;new google.visualization.AreaChart(document.getElementById("chart_DepensesRevenues")).draw(dataChart,options)}function chartUniqueDepenseOrRevenus(arrayDatas,type,idChar){let arrayCategorie=[],arrayPerDay=[],arrayForChart=[];arrayCategorie.push("day");for(let day in arrayDatas){arrayPerDay[day]=[];for(let key in arrayDatas[day][type])arrayCategorie.push(arrayDatas[day][type][key].categorie),arrayPerDay[day][arrayDatas[day][type][key].categorie]&&(arrayPerDay[day][arrayDatas[day][type][key].categorie]+=parseInt(arrayDatas[day][type][key].prix,10)),arrayPerDay[day][arrayDatas[day][type][key].categorie]||(arrayPerDay[day][arrayDatas[day][type][key].categorie]=parseInt(arrayDatas[day][type][key].prix,10))}for(day in arrayCategorie=[...new Set(arrayCategorie)],arrayForChart.push(arrayCategorie),arrayPerDay){let arrayTemp=[];for(categorie in arrayTemp.push(day),arrayCategorie)"day"!==arrayCategorie[categorie]&&(arrayPerDay[day][arrayCategorie[categorie]]&&arrayTemp.push(arrayPerDay[day][arrayCategorie[categorie]]),arrayPerDay[day][arrayCategorie[categorie]]||arrayTemp.push(0));arrayForChart.push(arrayTemp)}var data=google.visualization.arrayToDataTable(arrayForChart),options={title:type,width:600,height:400,legend:{position:"top",maxLines:1},bar:{groupWidth:"75%"},isStacked:!0},chart;new google.visualization.ColumnChart(document.getElementById(idChar)).draw(data,options)}google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback(drawCharts);